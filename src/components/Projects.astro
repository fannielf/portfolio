---
interface GitHubRepo {
    name: string;
    description: string | null;
    html_url: string;
    fork: boolean;
    stargazers_count: number;
}

const username = "RuBoMa";

// Fetch repos dynamically
const response = await fetch(`https://api.github.com/users/${username}/repos`);
const repos: GitHubRepo[] = await response.json();

// Filter out forks and sort by stars
const filtered = repos
    .filter((repo: GitHubRepo) => !repo.fork)
    .sort(
        (a: GitHubRepo, b: GitHubRepo) =>
            b.stargazers_count - a.stargazers_count,
    );
---

<section class="max-w-6xl mx-auto my-12 px-4">
    <h2 class="text-3xl font-bold mb-6 text-center">Projects</h2>

    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {
            filtered.map((repo: GitHubRepo) => (
                <a
                    href={repo.html_url}
                    target="_blank"
                    class="group p-5 rounded-2xl shadow-md bg-gray-900 border border-gray-800 hover:border-blue-500 transition transform hover:-translate-y-1 hover:shadow-blue-500/20"
                >
                    <h3 class="text-xl font-semibold mb-2 group-hover:text-blue-400 transition">
                        {repo.name}
                    </h3>
                    <p class="text-gray-400 text-sm mb-3 line-clamp-3">
                        {repo.description ?? "No description available"}
                    </p>
                    <div class="text-gray-500 text-xs">
                        â˜… {repo.stargazers_count}
                    </div>
                </a>
            ))
        }
    </div>
</section>
